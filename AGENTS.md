# AGENTS.md — инструкции для Codex (вкладка Codex)

Codex использует этот файл как проектные инструкции.

## Контекст и прогресс
- Контекст: `docs/PROJECT.md`
- Чек-лист: `docs/IMPLEMENTATION_CHECKLIST.md`
- Статус: `docs/STATUS.md`
- Шпаргалка: `docs/WORKFLOWS.md`

## Общие правила
- Сначала план (3–7 пунктов), потом изменения.
- Не делай «заодно улучшил». Только по задаче.
- Если нужно затронуть >5 файлов или менять публичный контракт — сначала попроси подтверждение.
- Изменил логику → добавь/обнови Jest тесты (unit + e2e).
- В конце работы обновляй `docs/IMPLEMENTATION_CHECKLIST.md` и `docs/STATUS.md`.

## Workflows
Пиши в сообщении: `Follow workflow: <NAME>`

### PLAN
1) Прочитай `docs/PROJECT.md` и невыполненные пункты чек-листа.
2) Дай план 3–7 пунктов.
3) Перечисли файлы, которые будут затронуты.
4) Дай команды для проверки.
5) Код не менять.

### IMPLEMENT_BACKEND
1) Реализуй задачу минимальными правками.
2) DTO + валидация обязательны.
3) Unit тесты на сервис + e2e на ключевой сценарий.
4) Обнови чек-лист и статус.

### ADD_TESTS
1) Добавь unit тесты (моки Prisma/Redis).
2) Добавь/обнови e2e тесты.
3) Выведи команды запуска.

### FIX_BUG
1) Сначала тест (если возможно).
2) Минимальный фикс.
3) Прогони тесты и обнови чек-лист/статус.
