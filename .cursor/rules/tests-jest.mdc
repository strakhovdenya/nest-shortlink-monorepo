---
description: "Тесты: Jest (unit/e2e), ясные сценарии, воспроизводимость"
globs: ["**/*.spec.ts","**/*.e2e-spec.ts","test/**","apps/api/test/**"]
---

## Unit-тесты
- Мокай Prisma/Redis/внешние клиенты.
- Тестируй бизнес-логику и ветвления (happy-path + 1–2 негативных кейса).
- Не трогай сеть/реальную БД в unit.

## E2E-тесты
- Проверяй HTTP-сценарии (auth → create link → redirect).
- Тесты должны быть независимы от порядка и состояния (чистка/изолированная БД).
